{
  "openapi": "3.0.1",
  "info": {
    "title": "RAS Assistant API",
    "version": "0.1.0"
  },
  "servers": [
    {
      "url": "http://46.224.118.210:8000"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": ["health"],
        "summary": "Health",
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true
                }
              }
            }
          }
        }
      }
    },
    "/me": {
      "get": {
        "tags": ["me"],
        "summary": "Me",
        "operationId": "me_me_get",
        "parameters": [
          {
            "name": "email",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/EmployeeOut" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/ras/month-summary": {
      "get": {
        "tags": ["ras"],
        "summary": "Month Summary",
        "operationId": "month_summary_ras_month_summary_get",
        "parameters": [
          {
            "name": "email",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "year",
            "in": "query",
            "required": true,
            "schema": { "type": "integer" }
          },
          {
            "name": "month",
            "in": "query",
            "required": true,
            "schema": { "type": "integer" }
          },
          {
            "name": "hours_per_workday",
            "in": "query",
            "required": false,
            "schema": { "type": "integer", "default": 8 }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/MonthSummaryOut" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/ras/period-summary": {
      "get": {
        "tags": ["ras"],
        "summary": "Period Summary",
        "operationId": "period_summary_ras_period_summary_get",
        "parameters": [
          {
            "name": "email",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "from_ym",
            "in": "query",
            "required": true,
            "description": "YYYYMM, es 202510",
            "schema": { "type": "integer", "description": "YYYYMM, es 202510" }
          },
          {
            "name": "to_ym",
            "in": "query",
            "required": true,
            "description": "YYYYMM, es 202512",
            "schema": { "type": "integer", "description": "YYYYMM, es 202512" }
          },
          {
            "name": "hours_per_workday",
            "in": "query",
            "required": false,
            "schema": { "type": "integer", "default": 8 }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/PeriodSummaryOut" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AbsencesOut": {
        "type": "object",
        "required": ["ferie_giorni", "permesso_giorni", "malattia_giorni"],
        "properties": {
          "ferie_giorni": { "type": "integer" },
          "permesso_giorni": { "type": "integer" },
          "malattia_giorni": { "type": "integer" }
        },
        "additionalProperties": false
      },
      "ChecksOut": {
        "type": "object",
        "required": ["days_without_lines", "mixed_days"],
        "properties": {
          "days_without_lines": { "type": "array", "items": { "type": "integer" } },
          "mixed_days": { "type": "array", "items": { "type": "integer" } }
        },
        "additionalProperties": false
      },
      "EmployeeOut": {
        "type": "object",
        "required": ["id", "full_name", "email", "active", "created_at"],
        "properties": {
          "id": { "type": "integer" },
          "full_name": { "type": "string" },
          "email": { "type": "string" },
          "site": { "type": "string" },
          "level": { "type": "string" },
          "company": { "type": "string" },
          "active": { "type": "boolean" },
          "created_at": { "type": "string", "format": "date-time" }
        },
        "additionalProperties": false
      },
      "MonthSummaryOut": {
        "type": "object",
        "required": ["email", "year", "month", "exists"],
        "properties": {
          "email": { "type": "string" },
          "year": { "type": "integer" },
          "month": { "type": "integer" },
          "exists": { "type": "boolean" },

          "sheet_id": { "type": "integer" },
          "absences": { "$ref": "#/components/schemas/AbsencesOut" },
          "work_days": { "type": "integer" },
          "ordinary_hours_est": { "type": "integer" },
          "ore_extra_tot": { "type": "number" },
          "spese_tot": { "type": "number" },
          "checks": { "$ref": "#/components/schemas/ChecksOut" }
        },
        "additionalProperties": false
      },
      "PeriodMonthOut": {
        "type": "object",
        "required": [
          "year",
          "month",
          "sheet_status",
          "absences",
          "work_days",
          "ordinary_hours_est",
          "ore_extra_tot",
          "spese_tot"
        ],
        "properties": {
          "year": { "type": "integer" },
          "month": { "type": "integer" },
          "sheet_status": { "type": "string" },
          "absences": { "$ref": "#/components/schemas/AbsencesOut" },
          "work_days": { "type": "integer" },
          "ordinary_hours_est": { "type": "integer" },
          "ore_extra_tot": { "type": "number" },
          "spese_tot": { "type": "number" }
        },
        "additionalProperties": false
      },
      "PeriodTotalsOut": {
        "type": "object",
        "required": [
          "ferie_giorni",
          "permesso_giorni",
          "malattia_giorni",
          "work_days",
          "ordinary_hours_est",
          "ore_extra_tot",
          "spese_tot"
        ],
        "properties": {
          "ferie_giorni": { "type": "integer" },
          "permesso_giorni": { "type": "integer" },
          "malattia_giorni": { "type": "integer" },
          "work_days": { "type": "integer" },
          "ordinary_hours_est": { "type": "integer" },
          "ore_extra_tot": { "type": "number" },
          "spese_tot": { "type": "number" }
        },
        "additionalProperties": false
      },
      "PeriodSummaryOut": {
        "type": "object",
        "required": ["email", "from_ym", "to_ym", "months", "totals"],
        "properties": {
          "email": { "type": "string" },
          "from_ym": { "type": "integer" },
          "to_ym": { "type": "integer" },
          "months": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/PeriodMonthOut" }
          },
          "totals": { "$ref": "#/components/schemas/PeriodTotalsOut" }
        },
        "additionalProperties": false
      },
      "HTTPValidationError": {
        "type": "object",
        "properties": {
          "detail": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/ValidationError" }
          }
        },
        "additionalProperties": false
      },
      "ValidationError": {
        "type": "object",
        "required": ["loc", "msg", "type"],
        "properties": {
          "loc": {
            "type": "array",
            "items": { "type": "string" }
          },
          "msg": { "type": "string" },
          "type": { "type": "string" }
        },
        "additionalProperties": false
      }
    }
  }
}
